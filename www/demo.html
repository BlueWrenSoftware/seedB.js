<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <button onclick="keyCursor('timeStamp')">start</button>

  
    
      <h1>IndexedDB Example</h1>
  
      <p>
          <fieldset id="addForm">
              <legend>Add item</legend>
              <label>Name</label>
              <input id="nameInput">
              <label>Author</label>
              <input id="authorInput">
              <label>Year</label>
              <input id="yearInput">
              <label>ISBN</label>
              <input id="isbnInput">
              <button id="addButton">Add</button>
          </fieldset>
      </p>
  
      <p>
        <fieldset id="deleteForm">
          <legend>Delete item</legend>
          <label>ISBN</label>
          <input id="isbnDelInput">
          <button id="delButton">Delete</button>
        </fieldset>
      </p>
  
      <table id="books-table">
          <thead>
              <tr><th>Name</th><th>Author</th><th>Year</th><th>ISBN</th></tr>
          </thead>
          <tbody id="books-table-body">
          </tbody>
      </table>
  

  


  <script>
    function keyCursor(keyOption) {
      let db;
      const request = indexedDB.open("seedB");
      request.onerror = event => {
        console.log("No IndexedDB!");
      };
      request.onsuccess = event => {
        db = event.target.result;
        const transaction = db.transaction(['entity'], "readonly");
        const store = transaction.objectStore('entity');
        const selectIndex = store.index(keyOption);
        selectIndex.openKeyCursor().onsuccess = function (event) {
          const cursor = event.target.result;
          if (cursor) {
            console.log(cursor.key);
            //console.log(cursor.primaryKey);
            //console.log(store.get(keyOption));
            console.log(store.get(cursor.primaryKey));
            cursor.continue();
          } else {
            console.log('All last names displayed.');
          }
        }
      };
    };
    //keyCursor('timeStamp');
  </script>
  </body>
</html>